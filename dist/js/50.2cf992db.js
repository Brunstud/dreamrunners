"use strict";(self["webpackChunkjekedao_front"]=self["webpackChunkjekedao_front"]||[]).push([[50],{9050:function(e,s,a){a.r(s),a.d(s,{default:function(){return m}});var r=function(){var e=this,s=e._self._c;return s("div",{staticClass:"home",style:{backgroundImage:"url("+e.background+")"}},[s("div",{staticClass:"overlay"}),s("div",{staticClass:"content"},[s("h1",[e._v(e._s(e.texts.h1[e.currentLanguage]))]),s("p",[e._v(e._s(e.texts.p[e.currentLanguage]))]),s("el-form",{ref:"form",staticClass:"custom-label",attrs:{model:e.formData,rules:e.rules,"label-width":"80px"}},[s("el-form-item",{attrs:{prop:"username"}},[s("template",{slot:"label"},[s("span",{staticClass:"custom-label"},[e._v(e._s(e.abbr.username[e.currentLanguage]))])]),s("el-input",{attrs:{placeholder:e.prompts.username[e.currentLanguage]},model:{value:e.formData.username,callback:function(s){e.$set(e.formData,"username",s)},expression:"formData.username"}})],2),s("el-form-item",{attrs:{prop:"password"}},[s("template",{slot:"label"},[s("span",{staticClass:"custom-label"},[e._v(e._s(e.abbr.password[e.currentLanguage]))])]),s("el-input",{attrs:{type:"password",placeholder:e.prompts.password[e.currentLanguage]},model:{value:e.formData.password,callback:function(s){e.$set(e.formData,"password",s)},expression:"formData.password"}})],2),s("el-form-item",[s("el-button",{staticClass:"center-button",attrs:{type:"primary"},on:{click:e.toRegistPage}},[e._v(e._s("Chinese"==e.currentLanguage?"注册":"Regist"))]),s("el-button",{staticClass:"center-button",attrs:{type:"primary"},on:{click:e.onSubmitLogin}},[e._v(e._s("Chinese"==e.currentLanguage?"登录":"Login"))])],1)],1)],1)])},t=[],n=(a(560),a(804)),i={name:"LoginPage",data(){return{background:a(4955),texts:{h1:{Chinese:"放飞希望",English:"Fly Our Hopes",Louis:"用户登录"},p:{Chinese:"进入我的漫天星空",English:"Enter my starry sky",Louis:"User Login Interface"}},abbr:{username:{Chinese:"账号",English:"Username",Louis:"Username"},password:{Chinese:"密码",English:"Password",Louis:"Password"}},prompts:{username:{Chinese:"请输入账号",English:"Enter your username",Louis:"Username"},password:{Chinese:"请输入密码",English:"Enter your password",Louis:"Password"}},userData:{uid:"",nickname:"",brief:"",password:""},formData:{username:"",password:""},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"},{validator:this.validateUsername,trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:this.validatePassword,trigger:"blur"}]},usernameVaild:!1,passwordMatch:!1}},computed:{currentLanguage(){return this.$store.getters.curLanguage}},methods:{toRegistPage(){this.$router.push("/regist")},onSubmitLogin(){console.log(this.$refs.form),this.$refs.form.validate((e=>{e?(this.$store.commit("setUserLogin",this.userData),this.$router.push("/main")):this.$message.error("请正确填写表单")}))},validateUsername(e,s,a){n.Z.get("api/users/").then((e=>{const a=e.data.find((e=>e.username===s));this.usernameVaild=a,this.userData.uid=a.uid,this.userData.nickname=a.nickname,this.userData.brief=a.brief,this.userData.password=a.password})).catch((()=>{alert("nickname-check-wrong")})),a()},validatePassword(e,s,a){s==this.userData.password?this.passwordMatch=!0:this.passwordMatch=!1,this.usernameVaild&&this.passwordMatch?a():a(new Error("账号和密码不匹配"))}},created(){this.$store.commit("hideAudioButton")}},o=i,u=a(1001),l=(0,u.Z)(o,r,t,!1,null,"f2ef207e",null),m=l.exports},4955:function(e,s,a){e.exports=a.p+"img/latterns_building.b7a0a589.jpg"}}]);
//# sourceMappingURL=50.2cf992db.js.map