"use strict";(self["webpackChunkjekedao_front"]=self["webpackChunkjekedao_front"]||[]).push([[212],{2212:function(s,e,a){a.r(e),a.d(e,{default:function(){return c}});var t=function(){var s=this,e=s._self._c;return e("div",{staticClass:"home",style:{backgroundImage:"url("+s.background+")"}},[e("div",{staticClass:"overlay"}),e("div",{staticClass:"content"},[e("h1",[s._v(s._s(s.texts.h1[s.currentLanguage]))]),e("p",[s._v(s._s(s.texts.p[s.currentLanguage]))]),e("el-form",{ref:"form",staticClass:"custom-label",attrs:{model:s.formData,rules:s.rules,"label-width":"80px"}},[e("el-form-item",{attrs:{prop:"username"}},[e("template",{slot:"label"},[e("span",{staticClass:"custom-label"},[s._v(s._s(s.abbr.username[s.currentLanguage]))])]),e("el-input",{attrs:{placeholder:s.prompts.username[s.currentLanguage]},model:{value:s.formData.username,callback:function(e){s.$set(s.formData,"username",e)},expression:"formData.username"}})],2),e("el-form-item",{attrs:{prop:"password"}},[e("template",{slot:"label"},[e("span",{staticClass:"custom-label"},[s._v(s._s(s.abbr.password[s.currentLanguage]))])]),e("el-input",{attrs:{type:"password",placeholder:s.prompts.password[s.currentLanguage]},model:{value:s.formData.password,callback:function(e){s.$set(s.formData,"password",e)},expression:"formData.password"}})],2),e("el-form-item",[e("el-button",{staticClass:"center-button",attrs:{type:"primary"},on:{click:s.toRegistPage}},[s._v(s._s("Chinese"==s.currentLanguage?"注册":"Regist"))]),e("el-button",{staticClass:"center-button",attrs:{type:"primary"},on:{click:s.onSubmitLogin}},[s._v(s._s("Chinese"==s.currentLanguage?"登录":"Login"))])],1)],1)],1)])},r=[],i=(a(560),a(804)),n={name:"LoginPage",data(){return{background:a(4955),texts:{h1:{Chinese:"放飞希望",English:"Fly Our Hopes",Louis:"用户登录"},p:{Chinese:"进入我的漫天星空",English:"Enter my starry sky",Louis:"User Login Interface"}},abbr:{username:{Chinese:"账号",English:"Username",Louis:"Username"},password:{Chinese:"密码",English:"Password",Louis:"Password"}},prompts:{username:{Chinese:"请输入账号",English:"Enter your username",Louis:"Username"},password:{Chinese:"请输入密码",English:"Enter your password",Louis:"Password"},successLogin:{Chinese:"欢迎回来， ",English:"Welcome back, ",Louis:"Finish Login, "},failSubmit:{Chinese:"有地方填错了，要不再试试。",English:"Mistakes somewhere, please try again.",Louis:"Fail Submission!"}},userData:{uid:"",nickname:"",brief:"",password:""},formData:{username:"",password:""},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"},{validator:this.validateUsername,trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:this.validatePassword,trigger:"blur"}]},usernameVaild:!1,passwordMatch:!1}},computed:{currentLanguage(){return this.$store.getters.curLanguage}},methods:{toRegistPage(){this.$router.push("/regist")},successLogin(){this.$message({message:this.prompts.successLogin[this.currentLanguage]+this.$store.getters.userInfo.NICKNAME+"!",type:"success"}),this.$router.push("/main")},onSubmitLogin(){console.log(this.$refs.form),this.$refs.form.validate((s=>{s?(this.$store.commit("setUserLogin",this.userData),this.successLogin()):this.$message.error(this.prompts.failSubmit[this.currentLanguage])}))},validateUsername(s,e,a){i.Z.get("api/users/").then((s=>{const a=s.data.find((s=>s.username===e));this.usernameVaild=a,a&&(this.userData.uid=a.uid,this.userData.nickname=a.nickname,this.userData.brief=a.brief,this.userData.password=a.password)})).catch((()=>{alert("nickname-check-wrong")})),a()},validatePassword(s,e,a){e==this.userData.password?this.passwordMatch=!0:this.passwordMatch=!1,this.usernameVaild&&this.passwordMatch?a():a(new Error("账号和密码不匹配"))}},created(){this.$store.commit("hideAudioButton")}},o=n,u=a(1001),l=(0,u.Z)(o,t,r,!1,null,"ade6cdf0",null),c=l.exports}}]);
//# sourceMappingURL=212.445dcab0.js.map