"use strict";(self["webpackChunkjekedao_front"]=self["webpackChunkjekedao_front"]||[]).push([[377],{3377:function(t,e,s){s.r(e),s.d(e,{default:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home",style:{backgroundImage:"url("+t.background+")"}},[e("div",{staticClass:"overlay"}),e("div",{staticClass:"content"},[e("h1",[t._v(t._s(t.texts.h1[t.currentLanguage]))]),e("p",[t._v(t._s(t.texts.p[t.currentLanguage]))])]),e("div",{staticClass:"avatar-container"},[e("img",{staticClass:"avatar-image",attrs:{src:t.AvatarImage,alt:"Avatar"}}),e("div",{staticClass:"avatar-border"})]),e("div",{staticClass:"user-info"},[e("h2",{staticClass:"user-name"},[t._v(t._s(t.editmode?t.tmpNICK:t.user.NICKNAME))]),e("p",{staticClass:"user-bio"},[t._v(t._s(t.texts.bio[t.currentLanguage]))]),e("p",{staticClass:"user-bio"},[t._v(t._s(t.editmode?t.tmpBIO:t.user.BIO))])]),t.editmode?t._e():e("el-button",{staticClass:"edit-button",attrs:{type:"primary"},on:{click:t.editChange}},[t._v(t._s(t.texts.edit[t.currentLanguage]))]),t.editmode?t._e():e("router-link",{attrs:{to:"/fly-latterns"}},[e("el-button",{staticClass:"fly-button",attrs:{type:"primary"}},[t._v(t._s(t.texts.release[t.currentLanguage]))])],1),t.editmode?t._e():e("router-link",{attrs:{to:"/login"}},[e("el-button",{staticClass:"logout-button",attrs:{type:"primary"},on:{click:t.logOut}},[t._v(t._s(t.texts.logout[t.currentLanguage]))])],1),0!=this.latterns.number||t.editmode?t.editmode?t._e():e("div",{staticClass:"lattern-container"},t._l(t.latterns.show,(function(s,r){return e("div",{key:r,staticClass:"lattern"},[e("router-link",{staticClass:"link",attrs:{to:"/latterns/"+s.No}},[e("img",{staticClass:"lattern-image",attrs:{src:t.latternImage,alt:"红灯笼"}}),e("p",[t._v(t._s(s.title))])])],1)})),0):e("p",{staticClass:"msg"},[t._v(t._s(t.texts.msg[t.currentLanguage]))]),t.editmode?t._e():e("el-button-group",[e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.latterns.pointer>0,expression:"latterns.pointer > 0"}],staticClass:"arrow left",attrs:{type:"primary",icon:"el-icon-arrow-left"},on:{click:t.moveLeft}}),e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.latterns.number-t.latterns.pointer>3,expression:"latterns.number - latterns.pointer > 3"}],staticClass:"arrow right",attrs:{type:"primary",icon:"el-icon-arrow-right"},on:{click:t.moveRight}})],1),0==this.latterns.number||t.editmode?t._e():e("p",{staticClass:"pageIndex"},[t._v(" "+t._s(this.latterns.pointer/3+1)+"/"+t._s(Math.ceil(this.latterns.number/3))+" ")]),t.editmode?e("el-form",{staticClass:"form-container",attrs:{inline:!0,model:t.userEdit,size:"small"}},[e("p",[t._v(t._s(t.prompts.useredit[t.currentLanguage]))]),e("div",[e("el-form-item",[e("el-input",{staticClass:"input textarea",attrs:{placeholder:t.prompts.nickname[t.currentLanguage],maxlength:t.nicknameMaxLength},model:{value:t.tmpNICK,callback:function(e){t.tmpNICK=e},expression:"tmpNICK"}})],1)],1),e("div",[e("el-form-item",[e("el-input",{staticClass:"input textarea",attrs:{rows:8,placeholder:t.prompts.bio[t.currentLanguage],maxlength:t.bioMaxLength},model:{value:t.tmpBIO,callback:function(e){t.tmpBIO=e},expression:"tmpBIO"}})],1)],1)]):t._e(),t.editmode?e("el-button",{staticClass:"reset-button",attrs:{type:"primary"},on:{click:t.resetEdit}},[t._v(t._s(t.prompts.reset[t.currentLanguage]))]):t._e(),t.editmode?e("el-button",{staticClass:"complete-button",attrs:{type:"primary"},on:{click:t.editChange}},[t._v(t._s(t.prompts.complete[t.currentLanguage]))]):t._e()],1)},n=[],a=(s(560),s(804)),i={name:"UserPage",data(){return{background:s(3139),latternImage:s(4015),texts:{h1:{Chinese:"放飞希望",English:"Fly Our Hopes",Louis:"用户个人界面"},p:{Chinese:"仰望我的漫天星空",English:"Look up at my starry sky",Louis:"User Personal Interface"},bio:{Chinese:"个人简介：",English:"Brief:",Louis:"我说："},msg:{Chinese:"我的故事才刚刚开始...",English:"There are many lanterns worth flying...",Louis:"something miss"},edit:{Chinese:"编辑个人信息",English:"Edit personal info",Louis:"EDIT PERSONAL INFO"},release:{Chinese:"制作一个新灯笼",English:"Make a new lantern",Louis:"POST A NEW MSG"},logout:{Chinese:"退出",English:"Log out",Louis:"LOGOUT"}},AvatarImage:s(6768),user:{UID:"123456",NICKNAME:"JohnDoe",BIO:"A passionate coder"},tmpNICK:"",tmpBIO:"",latterns:{No:[],show:[],pointer:0,number:0},prompts:{useredit:{Chinese:"编辑个人信息",English:"Edit Personal Information",Louis:"EDIT PERSONAL INFO"},nickname:{Chinese:"编辑昵称",English:"Edit ur nickname",Louis:"Edit ur nickname"},bio:{Chinese:"编辑简介",English:"Edit ur brief",Louis:"Edit ur brief"},reset:{Chinese:"重置",English:"Reset",Louis:"RESET"},complete:{Chinese:"完成",English:"Complete",Louis:"FINISH"}},editmode:!1,nicknameMaxLength:20,bioMaxLength:100}},computed:{currentLanguage(){return this.$store.getters.curLanguage}},methods:{async findLatterns(){try{const t=await a.Z.get("api/users/"),e=t.data.find((t=>t.uid===this.user.UID));e?(this.latterns.No=Array.from(e.latterns),this.latterns.number=e.latterns.length,this.findLatternsShown()):console.log("no-such-user")}catch(t){console.error("Error fetching user data:",t),alert("latterns-find-wrong")}},async findLatternsShown(){this.latterns.show.splice(0,this.latterns.show.length);for(let e=this.latterns.pointer,s=Math.min(this.latterns.pointer+3,this.latterns.number);e<s;e++)try{const t=await a.Z.get("api/latterns/"),s=t.data.find((t=>t.No===this.latterns.No[e]));console.log(s),s?this.latterns.show.push({No:s.No,title:s.title}):console.log("find-wrong-lattern-no")}catch(t){console.error("Error fetching lantern data:",t),alert("latterns-catch-wrong")}},moveLeft(){console.log("move-left"),this.latterns.pointer-=3,this.findLatternsShown()},moveRight(){console.log("move-right"),this.latterns.pointer+=3,this.findLatternsShown()},editChange(){console.log("edit mode change!"),this.editmode?(this.user.NICKNAME=this.tmpNICK,this.user.BIO=this.tmpBIO):this.resetEdit(),this.editmode=!this.editmode},resetEdit(){console.log("reset edit!"),console.log(this.user),this.tmpNICK=this.user.NICKNAME,this.tmpBIO=this.user.BIO},logOut(){console.log("log out!"),this.$store.commit("setUserLogout")}},mounted(){this.userEdit=this.user=this.$store.getters.userInfo,this.findLatterns()},created(){this.$store.getters.userLogin||this.$router.push("/login"),this.$store.commit("hideAudioButton")}},o=i,l=s(1001),u=(0,l.Z)(o,r,n,!1,null,"75a20666",null),c=u.exports},6768:function(t,e,s){t.exports=s.p+"img/Kitasan_Black.e6616c0e.png"},4015:function(t,e,s){t.exports=s.p+"img/lattern2.23b52818.png"}}]);
//# sourceMappingURL=377.180d8756.js.map