"use strict";(self["webpackChunkjekedao_front"]=self["webpackChunkjekedao_front"]||[]).push([[830],{6830:function(e,s,a){a.r(s),a.d(s,{default:function(){return m}});var r=function(){var e=this,s=e._self._c;return s("div",{staticClass:"home",style:{backgroundImage:"url("+e.background+")"}},[s("div",{staticClass:"overlay"}),s("div",{staticClass:"content"},[s("h1",[e._v(e._s(e.texts.h1[e.currentLanguage]))]),s("p",[e._v(e._s(e.texts.p[e.currentLanguage]))]),s("el-form",{ref:"form",staticClass:"custom-label",attrs:{model:e.formData,rules:e.rules,"label-width":"80px"}},[s("el-form-item",{attrs:{prop:"nickname"}},[s("template",{slot:"label"},[s("span",{staticClass:"custom-label"},[e._v(e._s(e.abbr.nickname[e.currentLanguage]))])]),s("el-input",{attrs:{placeholder:e.prompts.nickname[e.currentLanguage]},model:{value:e.formData.nickname,callback:function(s){e.$set(e.formData,"nickname",s)},expression:"formData.nickname"}})],2),s("el-form-item",{attrs:{prop:"username"}},[s("template",{slot:"label"},[s("span",{staticClass:"custom-label"},[e._v(e._s(e.abbr.username[e.currentLanguage]))])]),s("el-input",{attrs:{placeholder:e.prompts.username[e.currentLanguage]},model:{value:e.formData.username,callback:function(s){e.$set(e.formData,"username",s)},expression:"formData.username"}})],2),s("el-form-item",{attrs:{prop:"password"}},[s("template",{slot:"label"},[s("span",{staticClass:"custom-label"},[e._v(e._s(e.abbr.password[e.currentLanguage]))])]),s("el-input",{attrs:{type:"password",placeholder:e.prompts.password[e.currentLanguage]},model:{value:e.formData.password,callback:function(s){e.$set(e.formData,"password",s)},expression:"formData.password"}})],2),s("el-form-item",{attrs:{prop:"confirmPassword"}},[s("template",{slot:"label"},[s("span",{staticClass:"custom-label"},[e._v(e._s(e.abbr.confirmPassword[e.currentLanguage]))])]),s("el-input",{attrs:{type:"password",placeholder:e.prompts.confirmPassword[e.currentLanguage]},model:{value:e.formData.confirmPassword,callback:function(s){e.$set(e.formData,"confirmPassword",s)},expression:"formData.confirmPassword"}})],2),s("el-form-item",[s("el-button",{staticClass:"return-button",attrs:{type:"primary"},on:{click:e.goBack}},[e._v(e._s("Chinese"==e.currentLanguage?"返回":"Return"))]),s("el-button",{staticClass:"center-button",attrs:{type:"primary"},on:{click:e.onSubmitRegist}},[e._v(e._s("Chinese"==e.currentLanguage?"提交":"Submit"))])],1)],1)],1)])},t=[],n=(a(560),a(804)),i={name:"RegistPage",data(){return{background:a(4955),texts:{h1:{Chinese:"注册",English:"Regist",Louis:"用户注册"},p:{Chinese:"加入我们的逐梦派对",English:"Join our party of dream",Louis:"User Registration Interface"}},abbr:{nickname:{Chinese:"昵称",English:"Nickname",Louis:"Nickname"},username:{Chinese:"账号",English:"Username",Louis:"Username"},password:{Chinese:"密码",English:"Password",Louis:"Password"},confirmPassword:{Chinese:"确认密码",English:"Confirm",Louis:"Confirm"}},prompts:{nickname:{Chinese:"请输入昵称",English:"Enter your nickname",Louis:"Nickname"},username:{Chinese:"请输入账号",English:"Enter your username",Louis:"Username"},password:{Chinese:"请输入密码",English:"Enter your password",Louis:"Password"},confirmPassword:{Chinese:"请确认密码",English:"Confirm your password",Louis:"Confirm Password"},successRegist:{Chinese:"注册成功，请重新登陆！",English:"Registration successful, please log in again!",Louis:"Finish Registration!"},failSubmit:{Chinese:"有地方填错了，要不再试试。",English:"Mistakes somewhere, please try again.",Louis:"Fail Submission!"}},formData:{nickname:"",username:"",password:"",confirmPassword:""},rules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"},{validator:this.validateNickname,trigger:"blur"}],username:[{required:!0,message:"请输入账号",trigger:"blur"},{validator:this.validateUsername,trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:this.validatePassword,trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:this.validateConfirmPassword,trigger:"blur"}]},nicknameRepeat:!1,usernameRepeat:!1}},computed:{currentLanguage(){return this.$store.getters.curLanguage}},methods:{successRegist(){this.$message({message:this.prompts.successRegist[this.currentLanguage],type:"success"}),this.$router.push("/login")},onSubmitRegist(){console.log(this.$refs.form),this.$refs.form.validate((e=>{e?(console.log("submit! regist"),n.Z.post("api/users/",this.formData).then((e=>{console.log(e.data),console.log(this.formData)})).catch((()=>{alert("regist-submit-wrong")})),this.successRegist()):this.$message.error(this.prompts.failSubmit[this.currentLanguage])}))},validateNickname(e,s,a){n.Z.get("api/users/").then((e=>{this.nicknameRepeat=e.data.find((e=>e.nickname===s))})).catch((()=>{alert("nickname-check-wrong")})),this.nicknameRepeat?a(new Error("昵称重复")):a()},validateUsername(e,s,a){n.Z.get("api/users/").then((e=>{this.usernameRepeat=e.data.find((e=>e.username===s))})).catch((()=>{alert("nickname-check-wrong")})),s.length<6?a(new Error("账号长度不能少于6位")):this.usernameRepeat?a(new Error("账号重复")):a()},validatePassword(e,s,a){s.length<6?a(new Error("密码长度不能少于6位")):a()},validateConfirmPassword(e,s,a){s!==this.formData.password?a(new Error("两次输入的密码不一致")):a()},goBack(){this.$router.go(-1)}},created(){this.$store.commit("hideAudioButton")}},o=i,l=a(1001),u=(0,l.Z)(o,r,t,!1,null,"241379d1",null),m=u.exports}}]);
//# sourceMappingURL=830.3c4338df.js.map