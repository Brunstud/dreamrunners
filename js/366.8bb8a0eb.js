"use strict";(self["webpackChunkjekedao_front"]=self["webpackChunkjekedao_front"]||[]).push([[366],{9366:function(e,a,r){r.r(a),r.d(a,{default:function(){return u}});var s=function(){var e=this,a=e._self._c;return a("div",{staticClass:"home",style:{backgroundImage:"url("+e.background+")"}},[a("div",{staticClass:"overlay"}),a("div",{staticClass:"content"},[a("h1",[e._v(e._s(e.texts.h1[e.currentLanguage]))]),a("p",[e._v(e._s(e.texts.p[e.currentLanguage]))]),a("el-form",{ref:"form",staticClass:"custom-label",attrs:{model:e.formData,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"nickname"}},[a("template",{slot:"label"},[a("span",{staticClass:"custom-label"},[e._v(e._s(e.abbr.nickname[e.currentLanguage]))])]),a("el-input",{attrs:{placeholder:e.prompts.nickname[e.currentLanguage]},model:{value:e.formData.nickname,callback:function(a){e.$set(e.formData,"nickname",a)},expression:"formData.nickname"}})],2),a("el-form-item",{attrs:{prop:"username"}},[a("template",{slot:"label"},[a("span",{staticClass:"custom-label"},[e._v(e._s(e.abbr.username[e.currentLanguage]))])]),a("el-input",{attrs:{placeholder:e.prompts.username[e.currentLanguage]},model:{value:e.formData.username,callback:function(a){e.$set(e.formData,"username",a)},expression:"formData.username"}})],2),a("el-form-item",{attrs:{prop:"password"}},[a("template",{slot:"label"},[a("span",{staticClass:"custom-label"},[e._v(e._s(e.abbr.password[e.currentLanguage]))])]),a("el-input",{attrs:{type:"password",placeholder:e.prompts.password[e.currentLanguage]},model:{value:e.formData.password,callback:function(a){e.$set(e.formData,"password",a)},expression:"formData.password"}})],2),a("el-form-item",{attrs:{prop:"confirmPassword"}},[a("template",{slot:"label"},[a("span",{staticClass:"custom-label"},[e._v(e._s(e.abbr.confirmPassword[e.currentLanguage]))])]),a("el-input",{attrs:{type:"password",placeholder:e.prompts.confirmPassword[e.currentLanguage]},model:{value:e.formData.confirmPassword,callback:function(a){e.$set(e.formData,"confirmPassword",a)},expression:"formData.confirmPassword"}})],2),a("el-form-item",[a("el-button",{staticClass:"center-button",attrs:{type:"primary"},on:{click:e.onSubmitRegist}},[e._v(e._s("Chinese"==e.currentLanguage?"提交":"Submit"))])],1)],1)],1)])},t=[],n=(r(560),r(804)),o={name:"RegistPage",data(){return{background:r(4955),texts:{h1:{Chinese:"注册",English:"Regist",Louis:"用户注册"},p:{Chinese:"加入我们的逐梦派对",English:"Join our party of dream",Louis:"User Registration Interface"}},abbr:{nickname:{Chinese:"昵称",English:"Nickname",Louis:"Nickname"},username:{Chinese:"账号",English:"Username",Louis:"Username"},password:{Chinese:"密码",English:"Password",Louis:"Password"},confirmPassword:{Chinese:"确认密码",English:"Confirm",Louis:"Confirm"}},prompts:{nickname:{Chinese:"请输入昵称",English:"Enter your nickname",Louis:"Nickname"},username:{Chinese:"请输入账号",English:"Enter your username",Louis:"Username"},password:{Chinese:"请输入密码",English:"Enter your password",Louis:"Password"},confirmPassword:{Chinese:"请确认密码",English:"Confirm your password",Louis:"Confirm Password"}},formData:{nickname:"",username:"",password:"",confirmPassword:""},rules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"},{validator:this.validateNickname,trigger:"blur"}],username:[{required:!0,message:"请输入账号",trigger:"blur"},{validator:this.validateUsername,trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:this.validatePassword,trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:this.validateConfirmPassword,trigger:"blur"}]},nicknameRepeat:!1,usernameRepeat:!1}},computed:{currentLanguage(){return this.$store.getters.curLanguage}},methods:{onSubmitRegist(){console.log(this.$refs.form),this.$refs.form.validate((e=>{e?(console.log("submit! regist"),n.Z.post("api/users/",this.formData).then((e=>{console.log(e.data),console.log(this.formData)})).catch((()=>{alert("regist-submit-wrong")})),this.$router.push("/login")):this.$message.error("请正确填写表单")}))},validateNickname(e,a,r){n.Z.get("api/users/").then((e=>{this.nicknameRepeat=e.data.find((e=>e.nickname===a))})).catch((()=>{alert("nickname-check-wrong")})),this.nicknameRepeat?r(new Error("昵称重复")):r()},validateUsername(e,a,r){n.Z.get("api/users/").then((e=>{this.usernameRepeat=e.data.find((e=>e.username===a))})).catch((()=>{alert("nickname-check-wrong")})),a.length<6?r(new Error("账号长度不能少于6位")):this.usernameRepeat?r(new Error("账号重复")):r()},validatePassword(e,a,r){a.length<6?r(new Error("密码长度不能少于6位")):r()},validateConfirmPassword(e,a,r){a!==this.formData.password?r(new Error("两次输入的密码不一致")):r()}},created(){this.$store.commit("hideAudioButton")}},i=o,l=r(1001),m=(0,l.Z)(i,s,t,!1,null,"6c378a7b",null),u=m.exports},4955:function(e,a,r){e.exports=r.p+"img/latterns_building.b7a0a589.jpg"}}]);
//# sourceMappingURL=366.8bb8a0eb.js.map